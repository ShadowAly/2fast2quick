{% extends "base.html" %}

{% block content %}
<h2>Games</h2>

<ul class="list-group mb-4">
    {% for game in games %}
        <li class="list-group-item d-flex justify-content-between align-items-start flex-column">
            <div class="mb-2">
                <strong>{{ game.name }}</strong>
            </div>

            <div>
                <a href="{{ url_for('game_servers', game_id=game.doc_id) }}" class="btn btn-sm btn-info me-2">View Servers</a>

                {% if game.about_html %}
                    <a href="{{ url_for('static', filename='info/' + game.about_html) }}" class="btn btn-sm btn-secondary me-2" target="_blank">
                        More About This Game
                    </a>
                {% endif %}

                {% if current_user.username == 'Admin' %}
                    <form method="POST" action="{{ url_for('delete_game', game_id=game.doc_id) }}" style="display:inline;">
                        <button type="submit" class="btn btn-sm btn-danger"
                                onclick="return confirm('Are you sure you want to delete this game? This will also remove all servers.')">
                            Delete Game
                        </button>
                    </form>
                {% endif %}
            </div>
        </li>
    {% endfor %}
</ul>

{% if current_user.username == 'Admin' %}
    <a href="{{ url_for('add_game') }}" class="btn btn-primary">Add New Game</a>
{% endif %}

{% endblock %}
